# [15장 인터넷 프로토콜 버전, 개념, 개요](http://www.tcpipguide.com/free/t_InternetProtocolConceptsandOverview.htm)

IP의 동작 방식, 작업 수행에 중요한 특성을 기본적인 용어로 설명한다.  
IP의 주요 기능, 역사, 그리고 IP로 인해 IP 관련 프로토콜들이 어덯게 새로 생겨났는지를 살펴본다.

## IP 개요와 주요 동작 특성

![The Main Function of IP : Internetrowk Datagram Delivery!](http://www.tcpipguide.com/free/diagrams/ipdelivery.png)

IP의 전반적인 기능은 서로 연결되지 않은 네트워크 장비 간에 데이터를 전달하는 것이다. 이 그림은 IP가 한 장비에서 인터네크워크의 다른 장비로 어떻게 데이터그램을 전달하는지 보여준다. 서로 멀리 떨어져 있는 클라이언트와 서버는 일련의 연결된 네트워크로 IP 데이터 그램을 전달하여 통신한다.

> 인터넷 프로토콜(IP)은 많은 기능과 특성을 가지고 있기는 하지만, 주요 목적은 '서로 연결된 네트워크의 인터네트쿼그를 통해 데이터그램을 전달하는 것' 이다.

### 인터넷 프로토콜의 특성

- 전역 주소 지정: A지점에서 B지점까지 데이터를 보내려면 B지점에 어떤 장비가 있는지를 식별하는 것이 필수적이다. IP는 네트워크를 위한 주소지정 방법을 정의하고 데이터그램 전달에 이 주소를 사용한다.
- 하위 프로토콜에 무관: IP는 TCP/IP 스택과 호환되는 어떤 종류의 하뉘 네트워크에서도 데이터를 전송
- 비연결형 전달: A지점에서 B지점으로 데이터를 보내고자 할 때 먼저 B지점으로 연결하고 데이터는 보내는 방법을 쓰지 않는다. IP는 데이터그램을 만들어서 곧바로 전송한다.
- 신뢰성이 없는 전달: 장비 A에서 장비 B로 데이터그램을 보낼 때 한 데이터그램을 보낸 뒤 바로 그 다음 데이터그램을 송신한다는 것을 의미한다. IP는 각 데이터그램이 제대로 전송됐는지 확인하지 않는다. IP는 최선 노력 (bbest-effort) 프로토콜이라고 불린다. IP는 데이터를 목적지까지 보내기 위해 필요한 일은 하지만 데이터가 실제로 목적지에 도달하는 것을 보장하지 않는다.
- 비승인형 전달: 신뢰성이 없는 특성과 일맥상통하게 IP는 승인 패킷을 전송하지 않는다. 장비 B는 장비 A로부터 데이터그램을 받을 때 장비 A에게 데이터그램을 잘 받았다는 응답은 보내지 않는다. 따라서 장비 A는 자신이 보낸 데이터그램이 제대로 전송됐는지 알지 못한다.

> IP는 왜 연결 없이 동작하며, 데이터 도착도 보장하지 않고, 데이터 수신 여부를 승인하는 방법을 제공하지 않도록 설계했을까?
> 그 이유는 연결 수립, 전달 보장, 에러 확인 등의 보장형 기능은 성능에 영향을 미치기 때문이다.
> TCP/IP 설계자들이 택한 해결책은 계층 구조의 힘을 이용하는 것이다. 연결, 에러 검사, 전송 보장 같은 서비스 품질 기능을 필요로 하는 애플리케이션을 위해 전송 계층에서 그러한 기능을 제공한다.

## IP의 기능

- 주소 지정: 데이터그램을 전달하기에 앞서, IP는 그것을 어디로 전달할지를 알아야 한다. 이러한 이유로 IP는 호스트 주소지정 방법을 포함한다.
- 데이터 캡슐화와 포매팅/패키징: IP는 전송 계층 프로토콜인 UDP와 TCP로부터 데이터를 받는다. 그리고 그 데이터를 전송하기 전에 특수 포맷을 이용해 IP 데이터그램으로 캡슐화 한다.
- 단편화와 재조합: IP 데이터그램은 로컬 네트워크에서의 전송을 위해 데이터 링크 계층으로 전달된다. 그렇지만 IP를 사용하는 각 물리 네트워크와 데이터 링크 네트워크의 최대 프레임 크기는 서로 다를 수 있다. 그래서 IP는 데이터그램을 조각으로 단편화하여 로컬 네트워크로 보내는 기능을 포함한다. 수신 장비는 재조합 기능을 이용하여 전체 IP 데이터그램을 재구성 한다.
- 라우팅과 간접 전달: IP 데이터그램을 동일 로컬 네트워크의 다른 목적지로 보내고 싶을 때는 하위에 있는 근거리 네트워크, 무선 LAN, 원거리 네트워크에서 데이터그램을 직접 전달 기법으로 보낼 수 있다. 그렇지만 많은 경우 원거리 네트워크의 최종 목적지는 출발지 장비와 직접 연결돼 있지 않다. 그러한 상황에서는 데이터그램을 간접적으로 전달해야 한다. 이를 위해 ICMP, RIP, BGP 등의 기타 프로토콜과 협력한다.

> [ 인터넷 제어 메시지 프로토콜 (ICMP)](https://aws.amazon.com/ko/what-is/icmp/) : 디바이스가 네트워크에서 데이터 전송 오류를 전달하는데 사용하는 통신 규칙 집합

> [라우팅 정보 프로토콜 (RIP)](https://aws.amazon.com/ko/what-is/routing/) : 홉 수를 기준으로 네트워크 간의 최단 경로를 결정합니다. RIP는 대규모 네트워크를 구현하는데 적합하지 않기 때문에 현재는 사용되지 않는 레거시 프로토콜 입니다.

> [경계 경로 프로토콜 (BGP)](https://aws.amazon.com/ko/what-is/routing/) : 인터넷을 통한 통신을 정의 합니다. 인터넷은 서로 모두 연결되어 있는 대규모 자율 시스템의 모음입니다. 모든 자율 시스템에는 Internet Assigned Numbers Authority에 등록하여 할당받는 Autonomous System Number(ASN)이 있습니다. BGP는 가장 가까운 ASN을 추적하고 대상 주소를 해당 ASN에 매핑하는 방식으로 작동 합니다.

## IP 역사, 표준, 버전, 밀접히 연관된 프로토콜

### IP 버전과 버전 번호

IP는 TCP와 IP 기능을 모두 포함하고 있던 초기 버전 TCP가 분리될 때 생겼고 당시 TCP가 버전 4일 때 분리되서 IP 버전 4(IPv4) 라고 불렀다.
IPv5는 없다
IPv6 혼란을 피하기 위해 사용...

### IP 관련 프로토콜

- IP 네트워크 주소 변환 (NAT) : 사설 네트워크가 외부 네트워크에 유연한 방법으로 인터페이스를 제시할 수 있도록 한다. IP주소를 공유할 수 있도록 하며 공용(Public) 네트워크에 있는 호스트가 사설(Private) IP 주소를 갖는 호스트에 접근하는 것을 어렵게 만들어 보안을 강화한다.
- IP Security (IPsec) : IP를 이용하여 안전한 데이터 전송을 위한 방법을 제공하는 하위 프로토콜 모음을 정의한다. IPSec는 가상 사설망을 가능케 하는 보안 프로토콜로 인기를 더해간다.
- 모바일 IP: 한 네트워크에서 다른 네트워크로 자주 이동하는 컴퓨터에서 IP를 사용하는 것과 관련된 일부 문제점을 해결하기 위한 프로토콜이다. 