# IP 네트워크 주소 변환 (NAT) 프로토콜

## 배경과 개념

NAT(Network Address Trasnlation) 는 적은 수의 공용 IP를 사설 주소를 사용하는 여러 호스트가 공유할 수 있도록 한다.

### NAT개발의 배경과 해결해야 할 문제

- 주소 공간 고갈: IP주소가 32비트만을 사용하다 보니 문제가 발생했다.
- IP 주소 비용 증가: IP 주소가 고갈되다 보니 비용이 증가한다.
- 보안 우려의 증가: 인터넷에 직접 연결 할 수록 보안 위험에 노출되었다.

### 해결방안

회사 네트워를 인터넷에 직접 연결하는 것이 아니라 간접적으로 연결하는 시스템을 구성하는 것이다.
당시에 대부분의 기관은 아래와 같은 방법으로 인터넷을 사용했다.

- 대부분의 호스트는 클라이언트 장비다.
- 동시에 인터넷에 접근하는 호스트는 많지 않다.
- 인터넷 통신은 라우팅 된다.

![전화 교환원!](https://cloudfront-us-east-1.images.arcpublishing.com/infobae/FRV3XSDUYBEFTPAWMTLNKN5SVU.jpg)

### NAT 동작 방식

NAT의 기본 구현은 기관의 내부 네트워크를 로컬 IP 네트워크를 위한 사설 주소 영역 중 하나로 설정하는 것을 포함한다. 그리고 하나 이상의 공인(인터넷) 주소가 기관에 할당되며, 하나 이상의 NAT 지원 라우터가 로컬 네트워크와 공중 인터넷 사이에 설치된다.

- 사설 IP 주소: 전화 시스템의 내선 번호
- 공인 IP 주소: 전화 시스템의 외부 회선
- NAT 라우터: 전화 시스템 컴퓨터와 상담원 역활

사실 IP 주소(내선 번호)를 필요에 따라 공인 IP 주소(외부 회선)으로 연결 시키는 것이 NAT의 동작 방식이다.

### NAT 장점

- 공인 IP 주소 공유
- 쉬운 확장
- 로컬 통제력 강화
- 인터넷 서비스 제공자 선택의 유연성
- 보안 강화
- 투명함

### NAT 단점

- 복잡성
- 공인 주소 부족으로 인한 문제
- 특정 애플리케이션과의 호환성 문제
- 보안 프로토콜 문제
- 클라이언트 접근 지원 미비
- 성능 감소

## IP NAT 주소 용어

- 내부 주소
- 외부 주소
- 로컬 주소
- 전역 주소

## IP NAT 정적 주소 매핑과 동적 주소 매핑

### 정적 매핑

### 동적 매핑

## IP NAT 단방향(전통적/아웃바운드) 동작

## IP NAT 양방향(Two-Way/인바운드) 동작

## IP NAT 포트 기반(과부하) 동작

## IP NAT 중복/2회 NAT 동작

## IP Nat 호환성 문제와 특수처리 요구사항
